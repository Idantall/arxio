(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[548],{7843:function(e,r,t){Promise.resolve().then(t.bind(t,9179))},9179:function(e,r,t){"use strict";t.r(r),t.d(r,{ProjectForm:function(){return f}});var n,a,o,s=t(6911),i=t(3761),l=t(5319),d=t(63),c=t(5232),m=t(2473),u=((n=u||{}).SAST="SAST",n.DAST="DAST",n),p=((a=p||{}).QUEUED="QUEUED",a.RUNNING="RUNNING",a.SUCCESS="SUCCESS",a.ERROR="ERROR",a),h=((o=h||{}).CRITICAL="CRITICAL",o.HIGH="HIGH",o.MEDIUM="MEDIUM",o.LOW="LOW",o.INFO="INFO",o);m.z.object({email:m.z.string().email({message:"כתובת אימייל לא תקינה"}),password:m.z.string().min(8,{message:"סיסמה חייבת להיות באורך 8 תווים לפחות"}).max(100).regex(/[A-Z]/,{message:"סיסמה חייבת לכלול אות גדולה"}).regex(/[a-z]/,{message:"סיסמה חייבת לכלול אות קטנה"}).regex(/[0-9]/,{message:"סיסמה חייבת לכלול ספרה"})}).extend({name:m.z.string().min(2,{message:"שם חייב להיות באורך 2 תווים לפחות"})});var x=m.z.object({id:m.z.string().optional(),repoProvider:m.z.enum(["github","gitlab","bitbucket"]),repoOwner:m.z.string().min(1,{message:"שם הבעלים נדרש"}),repoName:m.z.string().min(1,{message:"שם המאגר נדרש"}),defaultBranch:m.z.string().default("main"),deployedUrl:m.z.string().url({message:"כתובת URL לא תקינה"}).optional()});m.z.object({projectId:m.z.string(),scanType:m.z.nativeEnum(u)}),m.z.object({id:m.z.string().optional(),scanId:m.z.string().optional(),severity:m.z.nativeEnum(h),ruleId:m.z.string(),title:m.z.string(),description:m.z.string(),filePath:m.z.string().optional(),lineStart:m.z.number().optional(),lineEnd:m.z.number().optional(),url:m.z.string().optional(),resolved:m.z.boolean().default(!1)});var g=t(2548),b=t(317);function f(){var e,r,t,n,a;let o=(0,l.useRouter)(),[m,u]=(0,i.useState)(!1),[p,h]=(0,i.useState)(null),{register:f,handleSubmit:j,formState:{errors:N}}=(0,d.cI)({resolver:(0,c.F)(x),defaultValues:{repoProvider:"github",repoOwner:"",repoName:"",defaultBranch:"main",deployedUrl:""}});async function v(e){u(!0),h(null);try{let r=await (0,b.$L)(e);o.push("/project/".concat(r.id))}catch(e){console.error("Failed to create project:",e),h("Failed to create project. Please try again.")}finally{u(!1)}}return(0,s.jsx)(g.Zb,{children:(0,s.jsx)(g.aY,{className:"pt-6",children:(0,s.jsxs)("form",{onSubmit:j(v),className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"repoProvider",className:"block text-sm font-medium mb-1",children:"Repository Provider"}),(0,s.jsxs)("select",{id:"repoProvider",className:"w-full p-2 border rounded-md",...f("repoProvider"),children:[(0,s.jsx)("option",{value:"github",children:"GitHub"}),(0,s.jsx)("option",{value:"gitlab",children:"GitLab"}),(0,s.jsx)("option",{value:"bitbucket",children:"Bitbucket"})]}),N.repoProvider&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500",children:null===(e=N.repoProvider.message)||void 0===e?void 0:e.toString()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"repoOwner",className:"block text-sm font-medium mb-1",children:"Repository Owner / Organization"}),(0,s.jsx)("input",{id:"repoOwner",className:"w-full p-2 border rounded-md",placeholder:"e.g., 'facebook'",...f("repoOwner")}),N.repoOwner&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500",children:null===(r=N.repoOwner.message)||void 0===r?void 0:r.toString()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"repoName",className:"block text-sm font-medium mb-1",children:"Repository Name"}),(0,s.jsx)("input",{id:"repoName",className:"w-full p-2 border rounded-md",placeholder:"e.g., 'react'",...f("repoName")}),N.repoName&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500",children:null===(t=N.repoName.message)||void 0===t?void 0:t.toString()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"defaultBranch",className:"block text-sm font-medium mb-1",children:"Default Branch"}),(0,s.jsx)("input",{id:"defaultBranch",className:"w-full p-2 border rounded-md",placeholder:"e.g., 'main' or 'master'",...f("defaultBranch")}),N.defaultBranch&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500",children:null===(n=N.defaultBranch.message)||void 0===n?void 0:n.toString()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"deployedUrl",className:"block text-sm font-medium mb-1",children:"Deployed URL (optional)"}),(0,s.jsx)("input",{id:"deployedUrl",className:"w-full p-2 border rounded-md",placeholder:"https://your-app.example.com",...f("deployedUrl")}),(0,s.jsx)("p",{className:"mt-1 text-xs text-muted-foreground",children:"Required for DAST scans. Leave blank if you only want SAST."}),N.deployedUrl&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500",children:null===(a=N.deployedUrl.message)||void 0===a?void 0:a.toString()})]})]}),p&&(0,s.jsx)("p",{className:"text-sm text-red-500",children:p}),(0,s.jsxs)("div",{className:"flex justify-end",children:[(0,s.jsx)(g.zx,{type:"button",variant:"outline",onClick:()=>o.back(),className:"mr-2",children:"Cancel"}),(0,s.jsx)(g.zx,{type:"submit",disabled:m,children:m?"Creating...":"Create Project"})]})]})})})}},317:function(e,r,t){"use strict";t.d(r,{$L:function(){return s},ZD:function(){return o}});let n=[{id:"1",repoProvider:"github",repoOwner:"arxio",repoName:"demo-project",defaultBranch:"main",deployedUrl:"https://demo.arxio.com",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),userId:"1"}],a={project:{findMany:async e=>{let{where:r}=e;return r.userId?n.filter(e=>e.userId===r.userId):n},create:async e=>{let{data:r}=e,t={id:String(n.length+1),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),...r};return n.push(t),t}}};async function o(){try{return await a.project.findMany({where:{userId:"1"}})}catch(e){return console.error("Error fetching projects:",e),[]}}async function s(e){try{return await a.project.create({data:{...e,userId:"1"}})}catch(e){throw console.error("Error creating project:",e),Error("Failed to create project")}}}},function(e){e.O(0,[912,79,158,200,533,744],function(){return e(e.s=7843)}),_N_E=e.O()}]);