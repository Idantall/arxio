(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[78],{3781:function(e,l,r){"use strict";r.d(l,{Z:function(){return t}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(5439).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9197:function(e,l,r){"use strict";r.d(l,{Z:function(){return t}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(5439).Z)("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]])},2297:function(e,l,r){Promise.resolve().then(r.bind(r,4790))},4790:function(e,l,r){"use strict";r.r(l),r.d(l,{default:function(){return y}});var t=r(6911),s=r(3761),n=r(5319),c=r(2473),i=r(5232),a=r(63),o=r(2548),d=r(5439);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,d.Z)("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);var h=r(9197);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,d.Z)("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var j=r(3781);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let p=(0,d.Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),m=c.z.object({name:c.z.string().min(3,{message:"שם הפרויקט חייב להכיל לפחות 3 תווים"}),description:c.z.string().optional(),repositoryType:c.z.enum(["github","gitlab","bitbucket","local"]),repositoryUrl:c.z.string().url({message:"יש להזין כתובת URL תקינה"}).optional().or(c.z.literal("")),branch:c.z.string().optional(),localPath:c.z.string().optional()});function y(){let[e,l]=(0,s.useState)(!1),[r,c]=(0,s.useState)(null),d=(0,n.useRouter)(),y=(0,a.cI)({resolver:(0,i.F)(m),defaultValues:{name:"",description:"",repositoryType:"github",repositoryUrl:"",branch:"main",localPath:""}}),b="local"===y.watch("repositoryType");async function f(e){l(!0),c(null);try{let l=await fetch("/api/projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name,description:e.description||"",repositoryType:e.repositoryType,repositoryUrl:b?null:e.repositoryUrl,branch:b?null:e.branch,localPath:b?e.localPath:null})});if(!l.ok){let e=await l.json();throw Error(e.message||"שגיאה בעת יצירת הפרויקט")}let r=await l.json();d.push("/project/".concat(r.id))}catch(e){console.error("Failed to create project:",e),c(e instanceof Error?e.message:"שגיאה לא צפויה אירעה")}finally{l(!1)}}return(0,t.jsxs)("div",{className:"container mx-auto py-8 max-w-2xl",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-8 text-center",children:"יצירת פרויקט חדש"}),(0,t.jsxs)(o.Zb,{children:[(0,t.jsx)(o.Ol,{children:(0,t.jsx)(o.ll,{className:"text-center",children:"פרטי הפרויקט"})}),(0,t.jsx)(o.aY,{children:(0,t.jsx)(o.l0,{...y,children:(0,t.jsxs)("form",{onSubmit:y.handleSubmit(f),className:"space-y-6",children:[(0,t.jsx)(o.Wi,{control:y.control,name:"name",render:e=>{let{field:l}=e;return(0,t.jsxs)(o.xJ,{children:[(0,t.jsx)(o.lX,{children:"שם הפרויקט"}),(0,t.jsx)(o.NI,{children:(0,t.jsx)(o.II,{placeholder:"הזן שם לפרויקט",...l})}),(0,t.jsx)(o.pf,{children:"שם הפרויקט שישמש אותך לזיהוי קל בממשק המשתמש"}),(0,t.jsx)(o.zG,{})]})}}),(0,t.jsx)(o.Wi,{control:y.control,name:"description",render:e=>{let{field:l}=e;return(0,t.jsxs)(o.xJ,{children:[(0,t.jsx)(o.lX,{children:"תיאור"}),(0,t.jsx)(o.NI,{children:(0,t.jsx)(o.gx,{placeholder:"תיאור קצר של הפרויקט (אופציונלי)",...l})}),(0,t.jsx)(o.zG,{})]})}}),(0,t.jsx)(o.Wi,{control:y.control,name:"repositoryType",render:e=>{let{field:l}=e;return(0,t.jsxs)(o.xJ,{children:[(0,t.jsx)(o.lX,{children:"סוג מאגר"}),(0,t.jsxs)(o.OC,{onValueChange:l.onChange,defaultValue:l.value,children:[(0,t.jsx)(o.NI,{children:(0,t.jsx)(o.i4,{children:(0,t.jsx)(o.ki,{placeholder:"בחר סוג מאגר"})})}),(0,t.jsxs)(o.Bw,{children:[(0,t.jsx)(o.Ql,{value:"github",children:"GitHub"}),(0,t.jsx)(o.Ql,{value:"gitlab",children:"GitLab"}),(0,t.jsx)(o.Ql,{value:"bitbucket",children:"Bitbucket"}),(0,t.jsx)(o.Ql,{value:"local",children:"תיקייה מקומית"})]})]}),(0,t.jsx)(o.zG,{})]})}}),!b&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Wi,{control:y.control,name:"repositoryUrl",render:e=>{let{field:l}=e;return(0,t.jsxs)(o.xJ,{children:[(0,t.jsx)(o.lX,{children:"כתובת המאגר"}),(0,t.jsx)(o.NI,{children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(x,{className:"absolute left-3 top-2.5 h-5 w-5 text-muted-foreground"}),(0,t.jsx)(o.II,{placeholder:"https://github.com/username/repo",className:"pl-10",...l})]})}),(0,t.jsx)(o.pf,{children:"הכתובת של מאגר הקוד שברצונך לסרוק"}),(0,t.jsx)(o.zG,{})]})}}),(0,t.jsx)(o.Wi,{control:y.control,name:"branch",render:e=>{let{field:l}=e;return(0,t.jsxs)(o.xJ,{children:[(0,t.jsx)(o.lX,{children:"ענף (branch)"}),(0,t.jsx)(o.NI,{children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(h.Z,{className:"absolute left-3 top-2.5 h-5 w-5 text-muted-foreground"}),(0,t.jsx)(o.II,{placeholder:"main",className:"pl-10",...l})]})}),(0,t.jsx)(o.pf,{children:"הענף שיסרק במאגר הקוד (ברירת המחדל: main)"}),(0,t.jsx)(o.zG,{})]})}})]}),b&&(0,t.jsx)(o.Wi,{control:y.control,name:"localPath",render:e=>{let{field:l}=e;return(0,t.jsxs)(o.xJ,{children:[(0,t.jsx)(o.lX,{children:"נתיב מקומי"}),(0,t.jsx)(o.NI,{children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(u,{className:"absolute left-3 top-2.5 h-5 w-5 text-muted-foreground"}),(0,t.jsx)(o.II,{placeholder:"C:\\path\\to\\project",className:"pl-10",...l})]})}),(0,t.jsx)(o.pf,{children:"הנתיב המלא לתיקיית הפרויקט במחשב המקומי"}),(0,t.jsx)(o.zG,{})]})}}),r&&(0,t.jsxs)("div",{className:"flex items-center p-3 text-sm bg-destructive/15 text-destructive rounded-md",children:[(0,t.jsx)(j.Z,{className:"h-5 w-5 ml-2 shrink-0"}),(0,t.jsx)("p",{children:r})]}),(0,t.jsxs)("div",{className:"flex items-center p-3 text-sm bg-blue-500/15 text-blue-500 rounded-md",children:[(0,t.jsx)(p,{className:"h-5 w-5 ml-2 shrink-0"}),(0,t.jsx)("p",{children:"לאחר יצירת הפרויקט תוכל להתחיל בסריקה ולצפות בתוצאות בזמן אמת"})]})]})})}),(0,t.jsxs)(o.eW,{className:"flex justify-end space-x-2",children:[(0,t.jsx)(o.zx,{variant:"outline",onClick:()=>d.back(),className:"ml-2",children:"ביטול"}),(0,t.jsx)(o.zx,{type:"submit",onClick:y.handleSubmit(f),disabled:e,children:e?"יוצר פרויקט...":"צור פרויקט"})]})]})]})}}},function(e){e.O(0,[912,79,158,200,533,744],function(){return e(e.s=2297)}),_N_E=e.O()}]);